(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue")):"function"===typeof define&&define.amd?define(["CoreHome"],t):"object"===typeof exports?exports["GroupPermissions"]=t(require("CoreHome"),require("vue")):e["GroupPermissions"]=t(e["CoreHome"],e["Vue"])})("undefined"!==typeof self?self:this,(function(e,t){return function(e){var t={};function i(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(o,r,function(t){return e[t]}.bind(null,r));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="plugins/GroupPermissions/vue/dist/",i(i.s="fae3")}({"19dc":function(t,i){t.exports=e},"8bbf":function(e,i){e.exports=t},fae3:function(e,t,i){"use strict";if(i.r(t),i.d(t,"TabManageGroupAccess",(function(){return A})),i.d(t,"TabManageGroups",(function(){return Fe})),"undefined"!==typeof window){var o=window.document.currentScript,r=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);r&&(i.p=r[1])}var n=i("8bbf");function s(e,t){return p(e)||u(e,t)||a(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"===typeof e)return c(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}function u(e,t){var i=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o,r,n=[],s=!0,l=!1;try{for(i=i.call(e);!(s=(o=i.next()).done);s=!0)if(n.push(o.value),t&&n.length===t)break}catch(a){l=!0,r=a}finally{try{s||null==i["return"]||i["return"]()}finally{if(l)throw r}}return n}}function p(e){if(Array.isArray(e))return e}var d={id:"ajaxErrorAccessGroupMember",ref:"errorContainer"},h={class:"card"},m={class:"card-content"},b={class:"sites_autocomplete"},f={class:"entityContainer",style:{width:"600px","margin-top":"16px"}},g={class:"entityTable dataTable",style:{display:"inline-table",width:"550px"}},O={class:"first"},j={key:0,src:"plugins/UsersManager/images/ok.png",class:"accessGranted"},y=["onClick"],v=Object(n["createTextVNode"])(" Â  "),V={class:"ui-confirm",id:"confirmUpdateAccessToAllSites",ref:"confirmUpdateAccessToAllSites"},G=["textContent"],x=["value"],S=["value"];function N(e,t,i,o,r,l){var a=Object(n["resolveComponent"])("SiteSelector"),c=Object(n["resolveComponent"])("ActivityIndicator");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.translate("GroupPermissions_DescriptionAccessTab")),1),Object(n["createElementVNode"])("div",d,null,512),Object(n["createElementVNode"])("div",h,[Object(n["createElementVNode"])("div",m,[Object(n["createElementVNode"])("div",b,[Object(n["createVNode"])(a,{"default-to-first-site":!0,"show-selected-site":!0,"show-all-sites-item":e.hasSuperUserAccess,"switch-site-on-select":!1,"only-sites-with-admin-access":!0,"all-sites-text":e.translate("UsersManager_ApplyToAllWebsites"),"model-value":e.site,"onUpdate:modelValue":t[0]||(t[0]=function(t){e.site=t,e.updateGroupAccessList()})},null,8,["show-all-sites-item","all-sites-text","model-value"])]),Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("table",g,[Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",O,Object(n["toDisplayString"])(e.translate("GroupPermissions_Group")),1),Object(n["createElementVNode"])("th",null,Object(n["toDisplayString"])(e.translate("UsersManager_PrivNone")),1),Object(n["createElementVNode"])("th",null,Object(n["toDisplayString"])(e.translate("UsersManager_PrivView")),1),Object(n["createElementVNode"])("th",null,Object(n["toDisplayString"])(e.translate("UsersManager_PrivWrite")),1),Object(n["createElementVNode"])("th",null,Object(n["toDisplayString"])(e.translate("UsersManager_PrivAdmin")),1)])]),Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.groupAccess,(function(t){var i=s(t,2),o=i[0],r=i[1];return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:o},[Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(o),1),(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(["noaccess","view","write","admin"],(function(t){return Object(n["createElementVNode"])("td",{key:t},[r==t?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",j)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",{key:1,src:"plugins/UsersManager/images/no-access.png",class:"updateAccess",onClick:function(i){return e.onSetAccessClicked(i,o,t)}},null,8,y)),v])})),64))])})),128))])])]),Object(n["createVNode"])(c,{loading:e.isLoading,style:{"padding-top":"10px"}},null,8,["loading"]),Object(n["createElementVNode"])("div",V,[Object(n["createElementVNode"])("h2",{textContent:Object(n["toDisplayString"])(e.confirmUpdateAccessToAllSitesText)},null,8,G),Object(n["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,x),Object(n["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,S)],512)])])],64)}var E=i("19dc"),w=Object(n["defineComponent"])({components:{ActivityIndicator:E["ActivityIndicator"],SiteSelector:E["SiteSelector"]},data:function(){return{site:{id:E["Matomo"].idSite,name:E["Matomo"].currentSiteName},groupAccess:new Map,isLoading:!1,confirmUpdateAccessToAllSitesText:""}},methods:{onSetAccessClicked:function(e,t,i){var o=this,r=this.site.id;"all"===r?(this.confirmUpdateAccessToAllSitesText=Object(E["translate"])("GroupPermissions_ChangeAccessToAllSitesConfirm",i,t),E["Matomo"].helper.modalConfirm("#confirmUpdateAccessToAllSites",{yes:function(){return o.updateGroupAccess(r,t,i)}})):this.updateGroupAccess(r,t,i)},updateGroupAccess:function(e,t,i){var o=this;this.isLoading=!0,E["AjaxHelper"].post({module:"API",format:"json",method:"GroupPermissions.setGroupAccess"},{idSites:e,name:t,access:i},{errorElement:"#ajaxErrorAccessGroupMember"}).then((function(){o.groupAccess.set(t,i)})).finally((function(){o.isLoading=!1}))},updateGroupAccessList:function(){var e=this;this.isLoading=!0;var t=this.site.id;"all"===t?E["AjaxHelper"].post({module:"API",format:"json",method:"GroupPermissions.getAllGroups"},{},{errorElement:"#ajaxErrorAccessGroupMember"}).then((function(t){e.groupAccess.clear();var i=[];t.forEach((function(e){i.push(e.name)})),i.sort().forEach((function(t){e.groupAccess.set(t,"noaccess")}))})).finally((function(){e.isLoading=!1})):E["AjaxHelper"].post({module:"API",format:"json",method:"GroupPermissions.getGroupAccessFromSite"},{idSite:this.site.id},{errorElement:"#ajaxErrorAccessGroupMember"}).then((function(t){e.groupAccess.clear(),Object.keys(t).sort().forEach((function(i){e.groupAccess.set(i,t[i])}))})).finally((function(){e.isLoading=!1}))}},computed:{hasSuperUserAccess:function(){return!!E["Matomo"].hasSuperUserAccess}}});w.render=N;var A=w,L={class:"card"},M={class:"card-content",style:{width:"600px"}},k={id:"ajaxErrorManageGroups",ref:"errorContainer"};function _(e,t,i,o,r,s){var l=Object(n["resolveComponent"])("CreateGroup"),a=Object(n["resolveComponent"])("multiselect"),c=Object(n["resolveComponent"])("ManageGroup"),u=Object(n["resolveComponent"])("ActivityIndicator");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.translate("GroupPermissions_DescriptionGroupsTab")),1),Object(n["createVNode"])(l,{onGroupCreated:t[0]||(t[0]=function(t){return e.onGroupCreated(t)})}),Object(n["createElementVNode"])("div",L,[Object(n["createElementVNode"])("div",M,[Object(n["createElementVNode"])("h2",null,Object(n["toDisplayString"])(e.translate("GroupPermissions_ManageGroup")),1),Object(n["createVNode"])(a,{options:e.groups,"track-by":"idGroup",label:"name",modelValue:e.selectedGroup,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectedGroup=t})},null,8,["options","modelValue"]),e.selectedGroup?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,group:e.selectedGroup,onGroupRenamed:t[2]||(t[2]=function(t){return e.onGroupRenamed(t)}),onGroupDeleted:t[3]||(t[3]=function(t){return e.onGroupDeleted(t)})},null,8,["group"])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createElementVNode"])("div",k,null,512),Object(n["createVNode"])(u,{loading:e.isLoadingGroups||e.isLoadingDefaultGroup,style:{"padding-top":"10px"}},null,8,["loading"])],64)}function D(e){return 0!==e&&(!(!Array.isArray(e)||0!==e.length)||!e)}function B(e){return(...t)=>!e(...t)}function C(e,t){void 0===e&&(e="undefined"),null===e&&(e="null"),!1===e&&(e="false");const i=e.toString().toLowerCase();return-1!==i.indexOf(t.trim())}function P(e,t,i,o){return t?e.filter(e=>C(o(e,i),t)).sort((e,t)=>o(e,i).length-o(t,i).length):e}function $(e){return e.filter(e=>!e.$isLabel)}function T(e,t){return i=>i.reduce((i,o)=>o[e]&&o[e].length?(i.push({$groupLabel:o[t],$isLabel:!0}),i.concat(o[e])):i,[])}function R(e,t,i,o,r){return n=>n.map(n=>{if(!n[i])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const s=P(n[i],e,t,r);return s.length?{[o]:n[o],[i]:s}:[]})}const H=(...e)=>t=>e.reduce((e,t)=>t(e),t);var I={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(e,t){return D(e)?"":t?e[t]:e}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||0===this.modelValue?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const e=this.search||"",t=e.toLowerCase().trim();let i=this.options.concat();return i=this.internalSearch?this.groupValues?this.filterAndFlat(i,t,this.label):P(i,t,this.label,this.customLabel):this.groupValues?T(this.groupValues,this.groupLabel)(i):i,i=this.hideSelected?i.filter(B(this.isSelected)):i,this.taggable&&t.length&&!this.isExistingOption(t)&&("bottom"===this.tagPosition?i.push({isTag:!0,label:e}):i.unshift({isTag:!0,label:e})),i.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(e=>e[this.trackBy]):this.internalValue},optionKeys(){const e=this.groupValues?this.flatAndStrip(this.options):this.options;return e.map(e=>this.customLabel(e,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:0===this.internalValue.length?null:this.internalValue[0]},filterAndFlat(e,t,i){return H(R(t,i,this.groupValues,this.groupLabel,this.customLabel),T(this.groupValues,this.groupLabel))(e)},flatAndStrip(e){return H(T(this.groupValues,this.groupLabel),$)(e)},updateSearch(e){this.search=e},isExistingOption(e){return!!this.options&&this.optionKeys.indexOf(e)>-1},isSelected(e){const t=this.trackBy?e[this.trackBy]:e;return this.valueKeys.indexOf(t)>-1},isOptionDisabled(e){return!!e.$isDisabled},getOptionLabel(e){if(D(e))return"";if(e.isTag)return e.label;if(e.$isLabel)return e.$groupLabel;const t=this.customLabel(e,this.label);return D(t)?"":t},select(e,t){if(e.$isLabel&&this.groupSelect)this.selectGroup(e);else if(!(-1!==this.blockKeys.indexOf(t)||this.disabled||e.$isDisabled||e.$isLabel)&&(!this.max||!this.multiple||this.internalValue.length!==this.max)&&("Tab"!==t||this.pointerDirty)){if(e.isTag)this.$emit("tag",e.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{const i=this.isSelected(e);if(i)return void("Tab"!==t&&this.removeElement(e));this.multiple?this.$emit("update:modelValue",this.internalValue.concat([e])):this.$emit("update:modelValue",e),this.$emit("select",e,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(e){const t=this.options.find(t=>t[this.groupLabel]===e.$groupLabel);if(t){if(this.wholeGroupSelected(t)){this.$emit("remove",t[this.groupValues],this.id);const e=this.trackBy?t[this.groupValues].map(e=>e[this.trackBy]):t[this.groupValues],i=this.internalValue.filter(t=>-1===e.indexOf(this.trackBy?t[this.trackBy]:t));this.$emit("update:modelValue",i)}else{let e=t[this.groupValues].filter(e=>!(this.isOptionDisabled(e)||this.isSelected(e)));this.max&&e.splice(this.max-this.internalValue.length),this.$emit("select",e,this.id),this.$emit("update:modelValue",this.internalValue.concat(e))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(e){return e[this.groupValues].every(e=>this.isSelected(e)||this.isOptionDisabled(e))},wholeGroupDisabled(e){return e[this.groupValues].every(this.isOptionDisabled)},removeElement(e,t=!0){if(this.disabled)return;if(e.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1)return void this.deactivate();const i="object"===typeof e?this.valueKeys.indexOf(e[this.trackBy]):this.valueKeys.indexOf(e);if(this.multiple){const e=this.internalValue.slice(0,i).concat(this.internalValue.slice(i+1));this.$emit("update:modelValue",e)}else this.$emit("update:modelValue",null);this.$emit("remove",e,this.id),this.closeOnSelect&&t&&this.deactivate()},removeLastElement(){-1===this.blockKeys.indexOf("Delete")&&0===this.search.length&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&0===this.pointer&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||"undefined"!==typeof this.$el&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?null!==this.$refs.search&&"undefined"!==typeof this.$refs.search&&this.$refs.search.blur():"undefined"!==typeof this.$el&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if("undefined"===typeof window)return;const e=this.$el.getBoundingClientRect().top,t=window.innerHeight-this.$el.getBoundingClientRect().bottom,i=t>this.maxHeight;i||t>e||"below"===this.openDirection||"bottom"===this.openDirection?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(t-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(e-40,this.maxHeight))}}},U={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(e,t){return{"multiselect__option--highlight":e===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(t)}},groupHighlight(e,t){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":t.$isLabel}];const i=this.options.find(e=>e[this.groupLabel]===t.$groupLabel);return i&&!this.wholeGroupDisabled(i)?["multiselect__option--group",{"multiselect__option--highlight":e===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(i)}]:"multiselect__option--disabled"},addPointerElement({key:e}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],e),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(e){this.pointer=e,this.pointerDirty=!0}}},F={name:"vue-multiselect",mixins:[I,U],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:e=>`and ${e} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0},required:{type:Boolean,default:!1}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||0===this.singleValue)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return"above"===this.openDirection||"top"===this.openDirection||"below"!==this.openDirection&&"bottom"!==this.openDirection&&"above"===this.preferredOpenDirection},showSearchInput(){return this.searchable&&(!this.hasSingleSelectedSlot||!this.visibleSingleValue&&0!==this.visibleSingleValue||this.isOpen)}}};const K={ref:"tags",class:"multiselect__tags"},q={class:"multiselect__tags-wrap"},z={class:"multiselect__spinner"},W={key:0},Y={class:"multiselect__option"},J={class:"multiselect__option"},Q=Object(n["createTextVNode"])("No elements found. Consider changing the search query."),X={class:"multiselect__option"},Z=Object(n["createTextVNode"])("List is empty.");function ee(e,t,i,o,r,s){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{tabindex:e.searchable?-1:i.tabindex,class:[{"multiselect--active":e.isOpen,"multiselect--disabled":i.disabled,"multiselect--above":s.isAbove,"multiselect--has-options-group":s.hasOptionGroup},"multiselect"],onFocus:t[14]||(t[14]=t=>e.activate()),onBlur:t[15]||(t[15]=t=>!e.searchable&&e.deactivate()),onKeydown:[t[16]||(t[16]=Object(n["withKeys"])(Object(n["withModifiers"])(t=>e.pointerForward(),["self","prevent"]),["down"])),t[17]||(t[17]=Object(n["withKeys"])(Object(n["withModifiers"])(t=>e.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:t[18]||(t[18]=Object(n["withKeys"])(Object(n["withModifiers"])(t=>e.addPointerElement(t),["stop","self"]),["enter","tab"])),onKeyup:t[19]||(t[19]=Object(n["withKeys"])(t=>e.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+e.id},[Object(n["renderSlot"])(e.$slots,"caret",{toggle:e.toggle},()=>[Object(n["createVNode"])("div",{onMousedown:t[1]||(t[1]=Object(n["withModifiers"])(t=>e.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),Object(n["renderSlot"])(e.$slots,"clear",{search:e.search}),Object(n["createVNode"])("div",K,[Object(n["renderSlot"])(e.$slots,"selection",{search:e.search,remove:e.removeElement,values:s.visibleValues,isOpen:e.isOpen},()=>[Object(n["withDirectives"])(Object(n["createVNode"])("div",q,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(s.visibleValues,(t,i)=>Object(n["renderSlot"])(e.$slots,"tag",{option:t,search:e.search,remove:e.removeElement},()=>[(Object(n["openBlock"])(),Object(n["createBlock"])("span",{class:"multiselect__tag",key:i},[Object(n["createVNode"])("span",{textContent:Object(n["toDisplayString"])(e.getOptionLabel(t))},null,8,["textContent"]),Object(n["createVNode"])("i",{tabindex:"1",onKeypress:Object(n["withKeys"])(Object(n["withModifiers"])(i=>e.removeElement(t),["prevent"]),["enter"]),onMousedown:Object(n["withModifiers"])(i=>e.removeElement(t),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[n["vShow"],s.visibleValues.length>0]]),e.internalValue&&e.internalValue.length>i.limit?Object(n["renderSlot"])(e.$slots,"limit",{key:0},()=>[Object(n["createVNode"])("strong",{class:"multiselect__strong",textContent:Object(n["toDisplayString"])(i.limitText(e.internalValue.length-i.limit))},null,8,["textContent"])]):Object(n["createCommentVNode"])("v-if",!0)]),Object(n["createVNode"])(n["Transition"],{name:"multiselect__loading"},{default:Object(n["withCtx"])(()=>[Object(n["renderSlot"])(e.$slots,"loading",{},()=>[Object(n["withDirectives"])(Object(n["createVNode"])("div",z,null,512),[[n["vShow"],i.loading]])])]),_:3}),e.searchable?(Object(n["openBlock"])(),Object(n["createBlock"])("input",{key:0,ref:"search",name:i.name,id:e.id,type:"text",autocomplete:"off",spellcheck:i.spellcheck,placeholder:e.placeholder,required:i.required,style:s.inputStyle,value:e.search,disabled:i.disabled,tabindex:i.tabindex,onInput:t[2]||(t[2]=t=>e.updateSearch(t.target.value)),onFocus:t[3]||(t[3]=Object(n["withModifiers"])(t=>e.activate(),["prevent"])),onBlur:t[4]||(t[4]=Object(n["withModifiers"])(t=>e.deactivate(),["prevent"])),onKeyup:t[5]||(t[5]=Object(n["withKeys"])(t=>e.deactivate(),["esc"])),onKeydown:[t[6]||(t[6]=Object(n["withKeys"])(Object(n["withModifiers"])(t=>e.pointerForward(),["prevent"]),["down"])),t[7]||(t[7]=Object(n["withKeys"])(Object(n["withModifiers"])(t=>e.pointerBackward(),["prevent"]),["up"])),t[9]||(t[9]=Object(n["withKeys"])(Object(n["withModifiers"])(t=>e.removeLastElement(),["stop"]),["delete"]))],onKeypress:t[8]||(t[8]=Object(n["withKeys"])(Object(n["withModifiers"])(t=>e.addPointerElement(t),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+e.id},null,44,["name","id","spellcheck","placeholder","required","value","disabled","tabindex","aria-controls"])):Object(n["createCommentVNode"])("v-if",!0),s.isSingleLabelVisible?(Object(n["openBlock"])(),Object(n["createBlock"])("span",{key:1,class:"multiselect__single",onMousedown:t[10]||(t[10]=Object(n["withModifiers"])((...t)=>e.toggle&&e.toggle(...t),["prevent"]))},[Object(n["renderSlot"])(e.$slots,"singleLabel",{option:s.singleValue},()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.currentOptionLabel),1)])],32)):Object(n["createCommentVNode"])("v-if",!0),s.isPlaceholderVisible?(Object(n["openBlock"])(),Object(n["createBlock"])("span",{key:2,class:"multiselect__placeholder",onMousedown:t[11]||(t[11]=Object(n["withModifiers"])((...t)=>e.toggle&&e.toggle(...t),["prevent"]))},[Object(n["renderSlot"])(e.$slots,"placeholder",{},()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.placeholder),1)])],32)):Object(n["createCommentVNode"])("v-if",!0)],512),Object(n["createVNode"])(n["Transition"],{name:"multiselect"},{default:Object(n["withCtx"])(()=>[Object(n["withDirectives"])(Object(n["createVNode"])("div",{class:"multiselect__content-wrapper",onFocus:t[12]||(t[12]=(...t)=>e.activate&&e.activate(...t)),tabindex:"-1",onMousedown:t[13]||(t[13]=Object(n["withModifiers"])(()=>{},["prevent"])),style:{maxHeight:e.optimizedHeight+"px"},ref:"list"},[Object(n["createVNode"])("ul",{class:"multiselect__content",style:s.contentStyle,role:"listbox",id:"listbox-"+e.id,"aria-multiselectable":e.multiple},[Object(n["renderSlot"])(e.$slots,"beforeList"),e.multiple&&e.max===e.internalValue.length?(Object(n["openBlock"])(),Object(n["createBlock"])("li",W,[Object(n["createVNode"])("span",Y,[Object(n["renderSlot"])(e.$slots,"maxElements",{},()=>[Object(n["createTextVNode"])("Maximum of "+Object(n["toDisplayString"])(e.max)+" options selected. First remove a selected option to select another.",1)])])])):Object(n["createCommentVNode"])("v-if",!0),!e.max||e.internalValue.length<e.max?(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],{key:1},Object(n["renderList"])(e.filteredOptions,(t,i)=>(Object(n["openBlock"])(),Object(n["createBlock"])("li",{class:"multiselect__element",key:i,"aria-selected":e.isSelected(t),id:e.id+"-"+i,role:t&&(t.$isLabel||t.$isDisabled)?null:"option"},[t&&(t.$isLabel||t.$isDisabled)?Object(n["createCommentVNode"])("v-if",!0):(Object(n["openBlock"])(),Object(n["createBlock"])("span",{key:0,class:[e.optionHighlight(i,t),"multiselect__option"],onClick:Object(n["withModifiers"])(i=>e.select(t),["stop"]),onMouseenter:Object(n["withModifiers"])(t=>e.pointerSet(i),["self"]),"data-select":t&&t.isTag?e.tagPlaceholder:s.selectLabelText,"data-selected":s.selectedLabelText,"data-deselect":s.deselectLabelText},[Object(n["renderSlot"])(e.$slots,"option",{option:t,search:e.search,index:i},()=>[Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.getOptionLabel(t)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),t&&(t.$isLabel||t.$isDisabled)?(Object(n["openBlock"])(),Object(n["createBlock"])("span",{key:1,"data-select":e.groupSelect&&s.selectGroupLabelText,"data-deselect":e.groupSelect&&s.deselectGroupLabelText,class:[e.groupHighlight(i,t),"multiselect__option"],onMouseenter:Object(n["withModifiers"])(t=>e.groupSelect&&e.pointerSet(i),["self"]),onMousedown:Object(n["withModifiers"])(i=>e.selectGroup(t),["prevent"])},[Object(n["renderSlot"])(e.$slots,"option",{option:t,search:e.search,index:i},()=>[Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(e.getOptionLabel(t)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):Object(n["createCommentVNode"])("v-if",!0)],8,["aria-selected","id","role"]))),128)):Object(n["createCommentVNode"])("v-if",!0),Object(n["withDirectives"])(Object(n["createVNode"])("li",null,[Object(n["createVNode"])("span",J,[Object(n["renderSlot"])(e.$slots,"noResult",{search:e.search},()=>[Q])])],512),[[n["vShow"],i.showNoResults&&0===e.filteredOptions.length&&e.search&&!i.loading]]),Object(n["withDirectives"])(Object(n["createVNode"])("li",null,[Object(n["createVNode"])("span",X,[Object(n["renderSlot"])(e.$slots,"noOptions",{},()=>[Z])])],512),[[n["vShow"],i.showNoOptions&&(0===e.options.length||!0===s.hasOptionGroup&&0===e.filteredOptions.length)&&!e.search&&!i.loading]]),Object(n["renderSlot"])(e.$slots,"afterList")],12,["id","aria-multiselectable"])],36),[[n["vShow"],e.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}F.render=ee;var te=F,ie={class:"card"},oe={class:"card-content",style:{width:"600px"}},re=["value"],ne={id:"ajaxErrorCreateGroup",ref:"errorContainer"};function se(e,t,i,o,r,s){var l=Object(n["resolveComponent"])("ActivityIndicator");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ie,[Object(n["createElementVNode"])("div",oe,[Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("h2",null,Object(n["toDisplayString"])(e.translate("GroupPermissions_CreateNewGroup")),1),Object(n["createElementVNode"])("div",null,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.groupName=t})},null,512),[[n["vModelText"],e.groupName]]),Object(n["createElementVNode"])("input",{type:"button",value:e.translate("GroupPermissions_CreateNewGroupButton"),style:{padding:"8px"},onClick:t[1]||(t[1]=function(t){return e.createGroup(e.groupName)})},null,8,re)]),Object(n["createElementVNode"])("div",ne,null,512),Object(n["createVNode"])(l,{loading:e.isCreatingGroup,style:{"padding-top":"10px"}},null,8,["loading"])])])])}var le=Object(n["defineComponent"])({components:{ActivityIndicator:E["ActivityIndicator"]},data:function(){return{groupName:"",isCreatingGroup:!1}},emits:["group-created"],methods:{createGroup:function(e){var t=this;this.isCreatingGroup=!0,E["AjaxHelper"].post({module:"API",format:"json",method:"GroupPermissions.createGroup"},{groupName:e},{errorElement:"#ajaxErrorCreateGroup"}).then((function(i){t.$emit("group-created",{idGroup:i,name:e})})).finally((function(){t.isCreatingGroup=!1}))}}});le.render=se;var ae=le,ce={style:{"margin-top":"70px"}},ue=["value"],pe={class:"ui-confirm",id:"confirmRenameGroup"},de=["value"],he=["value"],me={id:"ajaxErrorRenameGroup",ref:"errorContainer"},be={style:{"margin-top":"70px"}},fe=["value"],ge={class:"ui-confirm",id:"confirmDeleteGroup"},Oe=["value"],je=["value"],ye={id:"ajaxErrorDeleteGroup",ref:"errorContainer"};function ve(e,t,i,o,r,s){var l=this,a=Object(n["resolveComponent"])("ManageGroupMembers"),c=Object(n["resolveComponent"])("ActivityIndicator");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(a,{group:e.group},null,8,["group"]),Object(n["createElementVNode"])("div",ce,[Object(n["createElementVNode"])("h3",null,Object(n["toDisplayString"])(e.translate("GroupPermissions_RenameGroup")),1),Object(n["createElementVNode"])("div",null,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return l.newGroupName=e})},null,512),[[n["vModelText"],this.newGroupName]]),Object(n["createElementVNode"])("input",{type:"button",value:e.translate("GroupPermissions_RenameGroupButton"),style:{padding:"8px"},onClick:t[1]||(t[1]=function(t){return e.confirmRenameGroup()})},null,8,ue)])]),Object(n["createElementVNode"])("div",pe,[Object(n["createElementVNode"])("h2",null,Object(n["toDisplayString"])(e.confirmRenameGroupText),1),Object(n["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,de),Object(n["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,he)]),Object(n["createElementVNode"])("div",me,null,512),Object(n["createVNode"])(c,{loading:e.isRenaming,style:{"padding-top":"10px"}},null,8,["loading"]),Object(n["createElementVNode"])("div",be,[Object(n["createElementVNode"])("h3",null,Object(n["toDisplayString"])(e.translate("GroupPermissions_DeleteGroup")),1),Object(n["createElementVNode"])("input",{type:"button",value:e.translate("GroupPermissions_DeleteGroupButton"),style:{padding:"8px"},onClick:t[2]||(t[2]=function(t){return e.confirmDeleteGroup()})},null,8,fe)]),Object(n["createElementVNode"])("div",ge,[Object(n["createElementVNode"])("h2",null,Object(n["toDisplayString"])(e.confirmDeleteGroupText),1),Object(n["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,Oe),Object(n["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,je)]),Object(n["createElementVNode"])("div",ye,null,512),Object(n["createVNode"])(c,{loading:e.isDeleting,style:{"padding-top":"10px"}},null,8,["loading"])],64)}var Ve={class:"entityContainer",style:{width:"600px","margin-top":"16px"}},Ge={class:"entityTable dataTable",style:{display:"inline-table",width:"550px"}},xe={class:"login"},Se={class:"text-center"},Ne=["onClick","title"],Ee=Object(n["createElementVNode"])("span",{class:"icon-delete"},null,-1),we=[Ee],Ae={id:"ajaxErrorLoadMembers",ref:"errorContainer"},Le={style:{"margin-top":"70px"}},Me={class:"groupPermissionsGroupAddMemberWrapper"},ke=["value"],_e={id:"ajaxErrorLoadLogins",ref:"errorContainer"},De={id:"ajaxErrorAddMember",ref:"errorContainer"},Be={class:"ui-confirm",id:"confirmRemoveMember",ref:"confirmRemoveMember"},Ce=["value"],Pe=["value"];function $e(e,t,i,o,r,s){var l=Object(n["resolveComponent"])("ActivityIndicator"),a=Object(n["resolveComponent"])("multiselect");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("h3",null,Object(n["toDisplayString"])(e.translate("GroupPermissions_ManageGroupMembers")),1),Object(n["createElementVNode"])("div",Ve,[Object(n["createElementVNode"])("table",Ge,[Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",null,Object(n["toDisplayString"])(e.translate("General_Username")),1),Object(n["createElementVNode"])("th",null,Object(n["toDisplayString"])(e.translate("GroupPermissions_RemoveFromGroup")),1)])]),Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.members,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:t},[Object(n["createElementVNode"])("td",xe,Object(n["toDisplayString"])(t),1),Object(n["createElementVNode"])("td",Se,[Object(n["createElementVNode"])("button",{class:"groupPermissionsRemoveMember btn btn-flat",onClick:function(i){return e.confirmRemoveMember(t)},title:e.translate("GroupPermissions_RemoveFromGroup")},we,8,Ne)])])})),128))])])]),Object(n["createElementVNode"])("div",Ae,null,512),Object(n["createVNode"])(l,{loading:e.isLoadingMembers,style:{"padding-top":"10px"}},null,8,["loading"]),Object(n["createElementVNode"])("div",Le,[Object(n["createElementVNode"])("h3",null,Object(n["toDisplayString"])(e.translate("GroupPermissions_AddUserToGroup")),1),Object(n["createElementVNode"])("div",Me,[Object(n["createVNode"])(a,{options:e.logins,placeholder:e.translate("GroupPermissions_SelectNewUser"),modelValue:e.selectedLoginToAdd,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selectedLoginToAdd=t})},null,8,["options","placeholder","modelValue"]),Object(n["createElementVNode"])("input",{type:"button",onClick:t[1]||(t[1]=function(t){return e.addMember()}),value:e.translate("GroupPermissions_AddUserToGroupButton"),style:{padding:"8px","margin-top":"8px"}},null,8,ke)])]),Object(n["createElementVNode"])("div",_e,null,512),Object(n["createElementVNode"])("div",De,null,512),Object(n["createVNode"])(l,{loading:e.isLoadingLogins||e.isAddingMember,style:{"padding-top":"10px"}},null,8,["loading"]),Object(n["createElementVNode"])("div",Be,[Object(n["createElementVNode"])("h2",null,Object(n["toDisplayString"])(e.confirmRemoveMemberText),1),Object(n["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,Ce),Object(n["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,Pe)],512)],64)}var Te=Object(n["defineComponent"])({components:{ActivityIndicator:E["ActivityIndicator"],Multiselect:te},data:function(){return{members:[],logins:[],selectedLoginToAdd:"",confirmRemoveMemberText:"",isLoadingMembers:!1,isLoadingLogins:!1,isAddingMember:!1,isRemovingMember:!1}},props:{group:{type:Object,required:!0}},mounted:function(){this.loadGroupMembers(),this.loadLogins()},methods:{loadGroupMembers:function(){var e=this;this.isLoadingMembers=!0,E["AjaxHelper"].post({module:"API",format:"json",method:"GroupPermissions.getMembersOfGroup"},{idGroup:this.group.idGroup},{errorElement:"#ajaxErrorLoadMembers"}).then((function(t){e.members=t.reduce((function(e,t){return e.push(t.login),e}),[]),e.members.sort()})).finally((function(){e.isLoadingMembers=!1}))},loadLogins:function(){var e=this;this.isLoadingLogins=!0,E["AjaxHelper"].post({module:"API",format:"json",method:"UsersManager.getUsersLogin"},{filter_limit:-1},{errorElement:"#ajaxErrorLoadLogins"}).then((function(t){e.logins=t,e.logins.sort()})).finally((function(){e.isLoadingLogins=!1}))},addMember:function(){var e=this;this.isAddingMember=!0;var t=this.selectedLoginToAdd;E["AjaxHelper"].post({module:"API",format:"json",method:"GroupPermissions.addUserToGroup"},{idGroup:this.group.idGroup,login:t},{errorElement:"#ajaxErrorAddMember"}).then((function(){e.members.push(t),e.members.sort()})).finally((function(){e.isAddingMember=!1}))},confirmRemoveMember:function(e){var t=this;this.confirmRemoveMemberText=Object(E["translate"])("GroupPermissions_RemoveFromGroupConfirm",e,this.group.name),E["Matomo"].helper.modalConfirm("#confirmRemoveMember",{yes:function(){return t.removeMember(e)}})},removeMember:function(e){var t=this;this.isRemovingMember=!0,E["AjaxHelper"].post({module:"API",format:"json",method:"GroupPermissions.removeUserFromGroup"},{idGroup:this.group.idGroup,login:e},{errorElement:"#ajaxErrorManageGroupMembers"}).then((function(){t.members=t.members.filter((function(t){return t!==e}))})).finally((function(){t.isRemovingMember=!1}))}},watch:{group:function(){this.loadGroupMembers()}}});Te.render=$e;var Re=Te,He=Object(n["defineComponent"])({components:{ActivityIndicator:E["ActivityIndicator"],ManageGroupMembers:Re},data:function(){return{newGroupName:"",confirmRenameGroupText:"",confirmDeleteGroupText:"",isRenaming:!1,isDeleting:!1}},props:{group:{type:Object,required:!0}},emits:["group-renamed","group-deleted"],mounted:function(){this.newGroupName=this.group.name},methods:{confirmRenameGroup:function(){var e=this;this.confirmRenameGroupText=Object(E["translate"])("GroupPermissions_RenameGroupConfirm",this.group.name,this.newGroupName),E["Matomo"].helper.modalConfirm("#confirmRenameGroup",{yes:function(){return e.renameGroup()}})},renameGroup:function(){var e=this;this.isRenaming=!0,E["AjaxHelper"].post({module:"API",format:"json",method:"GroupPermissions.renameGroup"},{idGroup:this.group.idGroup,newName:this.newGroupName},{errorElement:"#ajaxErrorRenameGroup"}).then((function(){e.$emit("group-renamed",e.group)})).finally((function(){e.isRenaming=!1}))},confirmDeleteGroup:function(){var e=this;this.confirmDeleteGroupText=Object(E["translate"])("GroupPermissions_DeleteGroupConfirm",this.group.name),E["Matomo"].helper.modalConfirm("#confirmDeleteGroup",{yes:function(){return e.deleteGroup()}})},deleteGroup:function(){var e=this;this.isDeleting=!0,E["AjaxHelper"].post({module:"API",format:"json",method:"GroupPermissions.deleteGroup"},{idGroup:this.group.idGroup},{errorElement:"#ajaxErrorDeleteGroup"}).then((function(){e.$emit("group-deleted",e.group)})).finally((function(){e.isDeleting=!1}))}},watch:{group:function(){this.newGroupName=this.group.name}}});He.render=ve;var Ie=He,Ue=Object(n["defineComponent"])({components:{ActivityIndicator:E["ActivityIndicator"],Multiselect:te,CreateGroup:ae,ManageGroup:Ie},data:function(){return{groups:[],selectedGroup:void 0,isLoadingGroups:!1,isLoadingDefaultGroup:!1}},mounted:function(){this.loadGroupList(),this.loadDefaultGroup()},methods:{loadGroupList:function(){var e=this;this.isLoadingGroups=!0,E["AjaxHelper"].post({module:"API",format:"json",method:"GroupPermissions.getAllGroups"},{},{errorElement:"#ajaxErrorManageGroups"}).then((function(t){e.groups=t})).finally((function(){e.isLoadingGroups=!1}))},loadDefaultGroup:function(){var e=this;this.isLoadingDefaultGroup=!0;var t=E["MatomoUrl"].getSearchParam("idGroup");t&&E["AjaxHelper"].post({module:"API",format:"json",method:"GroupPermissions.getGroupWithId"},{idGroup:t},{errorElement:"#ajaxErrorManageGroups"}).then((function(t){e.selectedGroup={idGroup:t.idGroup,name:t.name}})).finally((function(){e.isLoadingDefaultGroup=!1}))},onGroupCreated:function(e){this.groups.push(e),this.sortGroups(),this.selectedGroup=e},onGroupRenamed:function(e){var t=this.groups.findIndex((function(t){return t.idGroup===e.idGroup}));this.groups[t].name=e.name,this.sortGroups(),this.selectedGroup=e},onGroupDeleted:function(e){this.groups=this.groups.filter((function(t){return t.idGroup!==e.idGroup})),this.selectedGroup=this.groups.length>0?this.groups[0]:void 0},sortGroups:function(){this.groups.sort((function(e,t){return e.name.localeCompare(t.name)}))}}});Ue.render=_;var Fe=Ue;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=GroupPermissions.umd.min.js.map